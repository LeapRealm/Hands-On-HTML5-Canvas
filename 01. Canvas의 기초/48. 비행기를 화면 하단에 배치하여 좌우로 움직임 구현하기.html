<!DOCTYPE html>

<html lang="ko">
<head>
    <title>Canvas</title>
    <meta charset="utf-8" />
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.12.0.min.js"></script>
</head>
<body>
    <canvas id="myCanvas" width="400" height="300">Canvas를 지원하지 않습니다.</canvas>
    <script>
        var canvas = $("#myCanvas").get(0);
        var ctx = canvas.getContext("2d");

        var canW = canvas.width;
        var canH = canvas.height;
        var speed = 5;
        var keyCodeValue;

        var fighterImage = new Image();
        fighterImage.src = "images/BlueFighter.png";

        function Player() {
            this.y = 250, this.x = canW * 0.5 - 25, this.w = 50, this.h = 45;

            this.render = function() {
                ctx.strokeStyle = "red";
                ctx.strokeRect(this.x, this.y, this.w, this.h);
                ctx.drawImage(fighterImage, this.x, this.y);
            };
        }

        function update() {
            if(keyCodeValue === "A") {
                player.x -= speed;
            } else if(keyCodeValue === "D") {
                player.x += speed;
            }

            if(player.x < 0) {
                player.x = 0;
            } else if(player.x > (canW - player.w)) {
                player.x = canW - player.w;
            }
        }

        $(document).keydown(function(event) {
            keyCodeValue = String.fromCharCode(event.keyCode);
        });

        $(document).keyup(function(event) {
            keyCodeValue = "";
        });

        var player = new Player();

        function animate() {
            ctx.clearRect(0, 0, canW, canH);
            update();
            player.render();
        }

        setInterval(animate, 30);
    </script>
</body>
</html>